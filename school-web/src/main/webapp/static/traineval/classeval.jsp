<%@ page language="java" contentType="text/html; charset=utf-8"
	pageEncoding="utf-8"%>
<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">

		<title></title>
	</head>

	<body>
		<div class="fst" id="evalStandForm">
			<!--表头-->
			<ul>
				<li class="t1"> 2017年中山市第一期公务员初任培训班</li>
				<li class="t2">教学评估表</li>
			</ul>

			<ul class="sec">
				<li class="pg">评估基本信息</li>
			</ul>
			<div class="cen">
				<ul>
					<li class="zb">主办单位：中山市人力资源和社会保障局</li>
					<li class="cb">承办单位：中山市行政学院</li>
					<li class="xy">学员人数：78人</li>
					<li class="px">培训时间：
						<a class="beginDate">2017年4月12日</a>-
						<a class="endDate">2017年4月27日</a>&nbsp;共
						<a class="trainDays"> 12天</a>天</li>
					<li class="teacher">班主任：
						<a class="bzr"></a>
					</li>
					<li class="telephone">联系电话:
						<a class="mobile"></a>
					</li>
				</ul>
			</div>

			<ul class="pn">
				<li class="pg">评估内容</li>
			</ul>

			<!--<ul class="s1">
				<li class="s2">培训实施:</li>
			</ul>
			<div>
				<li class="s3">1、课程设置、内容安排科学合理</li>
				<ul class="radioUl">
					<li class="radioLi">
						<a class="radioA" data-val="henmanyi">很满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="manyi">满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="jibenmanyi">基本满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="bumanyi">不满意</a>
					</li>
				</ul>
			</div>
			<div>
				<li class="s4">2、优选师资、配备适当</li>
				<ul class="radioUl">
					<li class="radioLi">
						<a class="radioA" data-val="henmanyi">很满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="manyi">满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="jibenmanyi">基本满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="bumanyi">不满意</a>
					</li>
				</ul>
			</div>
			<div>
				<li class="s5">3、教学流程控制严谨有序、张弛有度，讲究实效</li>
				<ul class="radioUl">
					<li class="radioLi">
						<a class="radioA" data-val="henmanyi">很满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="manyi">满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="jibenmanyi">基本满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="bumanyi">不满意</a>
					</li>
				</ul>
			</div>
			<div>
				<li class="s6">4、班主任工作认真负责，管理细致，服务热情</li>
				<ul class="radioUl">
					<li class="radioLi">
						<a class="radioA" data-val="henmanyi">很满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="manyi">满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="jibenmanyi">基本满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="bumanyi">不满意</a>
					</li>
				</ul>
			</div>

			<ul class="b1">
				<li class="b2">培训保障:</li>
			</ul>
			<div>
				<li class="b3">5、教学设施、培训资源满足需求，食宿卫生安全</li>
				<ul class="radioUl">
					<li class="radioLi">
						<a class="radioA" data-val="henmanyi">很满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="manyi">满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="jibenmanyi">基本满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="bumanyi">不满意</a>
					</li>
				</ul>
			</div>
			<div>
				<li class="b4">6、服务管理严格规范，后勤保障到位</li>
				<ul class="radioUl">
					<li class="radioLi">
						<a class="radioA" data-val="henmanyi">很满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="manyi">满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="jibenmanyi">基本满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="bumanyi">不满意</a>
					</li>
				</ul>
			</div>

			<ul class="x1">
				<li class="x2">培训效果：</li>
			</ul>
			<div>
				<li class="x3">7、有效提升党性修养、文化素养等综合素质</li>
				<ul class="radioUl">
					<li class="radioLi">
						<a class="radioA" data-val="henmanyi">很满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="manyi">满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="jibenmanyi">基本满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="bumanyi">不满意</a>
					</li>
				</ul>
			</div>
			<div>
				<li class="x4">8、有效提高政策理论水平、业务工作能力</li>
				<ul class="radioUl">
					<li class="radioLi">
						<a class="radioA" data-val="henmanyi">很满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="manyi">满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="jibenmanyi">基本满意</a>
					</li>
					<li class="radioLi">
						<a class="radioA" data-val="bumanyi">不满意</a>
					</li>
				</ul>
			</div>
			<ul class="yj">
				<li class="y1">意见建议：</li>
			</ul>
			<textarea class="shuru" name="" placeholder="请输入您的意见建议..."></textarea>
			<input type="button" id="submit" value="提交" />
            -->
		</div>
	</body>
	<style type="text/css">
		html, body, div, span, object, iframe, h1, h2, h3, h4, h5,	h6,	p,	code, del,
		dfn,em,ins,	kbd,q,small,strong,var,b,i,	dl,	dt,	dd,	ol,	ul,	li,	fieldset,form,label,
		legend,	caption,tbody,tfoot,thead,tr,footer,header,	audio,video {
			margin: 0;
			padding: 0;
			border: 0;
			outline: 0;
			font-size: 100%;
			list-style: none;
			vertical-align: baseline;
			background: transparent;
			outline-style: none;
		}
		
		.fst {
			width: 1280px;
			border: 1px solid white;
			margin: 0 auto;
		}
		
		.t1 {
			font-size: 24px;
			font-family: "微软雅黑";
			color: #000000;
			text-align: center;
			margin-top: 46px;
		}
		
		.t2 {
			font-size: 24px;
			font-family: "微软雅黑";
			color: #000000;
			text-align: center;
			margin-top: 14px;
		}
		
		.sec {
			width: 1186px;
			height: 26px;
			margin: 56px 46px 0px 46px;
			background: url(title_bg.png) 0 0 no-repeat;
			font-size: 16px;
			color: #FFFFFF;
			text-align: center;
			border-bottom: 1px solid firebrick;
		}
		
		.pg {
			width: 127px;
			font-size: 16px;
			color: #FFFFFF;
			text-align: center;
		}
		
		.cen {
			width: 1186px;
			height: 89px;
			background: #f3f3f3;
			margin: 16px 46px 36px 46px;
		}
		
		.zb {
			display: inline-block;
			font-size: 14px;
			font-family: "微软雅黑";
			color: #000000;
			margin-top: 19px;
			margin-left: 20px;
		}
		
		.cb {
			display: inline-block;
			font-size: 14px;
			font-family: "微软雅黑";
			color: #000000;
			margin-left: 222px;
		}
		
		.xy {
			display: inline-block;
			font-size: 14px;
			font-family: "微软雅黑";
			color: #000000;
			margin-left: 346px;
		}
		
		.px {
			display: inline-block;
			font-size: 14px;
			font-family: "微软雅黑";
			color: #000000;
			margin-top: 20px;
			margin-left: 20px;
		}
		
		.teacher {
			display: inline-block;
			font-size: 14px;
			font-family: "微软雅黑";
			color: #000000;
			margin-top: 19px;
			margin-left: 205px;
		}
		
		.telephone {
			display: inline-block;
			font-size: 14px;
			font-family: "微软雅黑";
			color: #000000;
			margin-top: 19px;
			margin-left: 390px;
		}
		
		.pn {
			width: 1186px;
			height: 26px;
			margin: 36px 46px 0px 46px;
			background: url(title_bg.png) 0 0 no-repeat;
			font-size: 16px;
			color: #FFFFFF;
			text-align: center;
			border-bottom: 1px solid firebrick;
		}
		
		.s1 {
			height: 20px;
			width: 3px;
			background: #ffd943;
			margin: 24px 0px 0px 46px;
			border: 1px solid #ffd943;
		}
		
		.s2 {
			width: 80px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 16px;
			margin-left: 10px;
			color: #b4150a;
		}
		
		.s3 {
			width: 500px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 14px;
			margin: 32px 0px 0px 56px;
			color: #000000;
		}
		
		.s4 {
			width: 500px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 14px;
			margin: 0px 0px 0px 56px;
			color: #000000;
		}
		
		.s5 {
			width: 500px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 14px;
			margin: 0px 0px 0px 56px;
			color: #000000;
		}
		
		.s6 {
			width: 500px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 14px;
			margin: 0px 0px 0px 56px;
			color: #000000;
		}
		
		.b1 {
			height: 20px;
			width: 3px;
			background: #ffd943;
			margin: 60px 0px 0px 46px;
			border: 1px solid #ffd943;
		}
		
		.b2 {
			width: 80px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 16px;
			margin-left: 10px;
			color: #b4150a;
		}
		
		.b3 {
			width: 500px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 14px;
			margin: 32px 0px 0px 56px;
			color: #000000;
		}
		
		.b4 {
			width: 500px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 14px;
			margin: 0px 0px 0px 56px;
			color: #000000;
		}
		
		.x1 {
			height: 20px;
			width: 3px;
			background: #ffd943;
			margin: 60px 0px 0px 46px;
			border: 1px solid #ffd943;
		}
		
		.x2 {
			width: 80px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 16px;
			margin-left: 10px;
			color: #b4150a;
		}
		
		.x3 {
			width: 500px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 14px;
			margin: 32px 0px 0px 56px;
			color: #000000;
		}
		
		.x4 {
			width: 500px;
			display: inline-block;
			font-family: "微软雅黑";
			font-size: 14px;
			margin: 0px 0px 0px 56px;
			color: #000000;
		}
		
		ul.radioUl {
			margin: 20px 100px;
		}
		
		li.radioLi {
			width: 25%;
			margin: 0px;
			float: left;
		}
		
		a.radioA {
			display: inline-block;
			width: 100px;
			height: 20px;
			background-repeat: no-repeat;
			line-height: 20px;
			background-position: left center;
			padding-left: 20px;
			margin: 10px;
			cursor: pointer;
			background-image: url(no_selected.png);
		}
		
		a.selected {
			background-image: url(selected.png);
		}
		
		.yj {
			width: 1186px;
			height: 26px;
			margin: 70px 46px 0px 46px;
			background: url(title_bg.png) 0 0 no-repeat;
			font-size: 16px;
			color: #FFFFFF;
			text-align: center;
			border-bottom: 1px solid firebrick;
		}
		
		.y1 {
			width: 127px;
			font-size: 16px;
			color: #FFFFFF;
			text-align: center;
		}
		
		.shuru {
			width: 1187px;
			height: 173px;
			margin: 16px 0px 0px 46px;
			font-size: 17px;
			color: #b0b0b0;
			border-color: #cecece;
		}
		
		#submit {
			width: 120px;
			height: 40px;
			border-radius: 4px;
			background: #c3190c;
			color: #FFFFFF;
			font-size: 24px;
			margin: 150px 580px 10px 580px;
		}
	</style>
    <script src="flexible.js" type="text/javascript" charset="utf-8"></script>
	<script src="jquery-3.2.1.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		$(function() {
					var datas = {};

					datas = {
						"success": true,
						"message": "获取班级评价标准成功",
						"evalClass": {
							"classId": "ba9076d4-9169-4971-8f63-ad0124820fe7",
							"classCategory": "党校系列班",
							"className": "tttttt",
							"beginDate": "2017-06-08",
							"endDate": "2017-06-29",
							"trainDays": 21,
							"holdUnit": "",
							"undertaker": "",
							"verySatisfaction": "90",
							"satisfaction": "100",
							"trainees": 3,
							"bzr": "刘  明",
							"mobile": ""
						},
						"evalStand": [{
								"uuid": "19b356da-1e46-46c6-9558-e7b35d9c44d2",
								"createTime": "2017-06-21 08:50:55",
								"createUser": "学校管理员",
								"updateTime": "2017-06-21 08:50:55",
								"updateUser": null,
								"version": 0,
								"extField01": null,
								"extField02": null,
								"extField03": null,
								"extField04": null,
								"extField05": null,
								"isDelete": 0,
								"orderIndex": null,
								"indicatorId": "3ab7553f-4b9a-45d4-9a4f-02e911de561f",
								"indicatorStand": "有效提升党性修养、文化素养等综合素质",
								"indicatorName": "培训效果",
								"indicatorObject": 2
							},
							{
								"uuid": "21c22468-aea7-4f5e-8d6f-f78b21c1c765",
								"createTime": "2017-06-21 08:50:55",
								"createUser": "学校管理员",
								"updateTime": "2017-06-21 08:50:55",
								"updateUser": null,
								"version": 0,
								"extField01": null,
								"extField02": null,
								"extField03": null,
								"extField04": null,
								"extField05": null,
								"isDelete": 0,
								"orderIndex": null,
								"indicatorId": "3ab7553f-4b9a-45d4-9a4f-02e911de561f",
								"indicatorStand": "有效提高政策理论水平、业务工作能力",
								"indicatorName": "培训效果",
								"indicatorObject": 2
							},
							{
								"uuid": "8622e0d9-9bde-49be-82b6-e8201840c8a5",
								"createTime": "2017-06-21 08:49:15",
								"createUser": "学校管理员",
								"updateTime": "2017-06-21 08:49:15",
								"updateUser": null,
								"version": 0,
								"extField01": null,
								"extField02": null,
								"extField03": null,
								"extField04": null,
								"extField05": null,
								"isDelete": 0,
								"orderIndex": null,
								"indicatorId": "da87e67d-5ac4-4cc0-9e75-6037b14883ca",
								"indicatorStand": "班主任工作认真负责，管理细致，服务热情",
								"indicatorName": "培训实施",
								"indicatorObject": 2
							},
							{
								"uuid": "b957f5f8-664f-43ba-ad77-b8a2dd413434",
								"createTime": "2017-06-21 08:49:15",
								"createUser": "学校管理员",
								"updateTime": "2017-06-21 08:49:15",
								"updateUser": null,
								"version": 0,
								"extField01": null,
								"extField02": null,
								"extField03": null,
								"extField04": null,
								"extField05": null,
								"isDelete": 0,
								"orderIndex": null,
								"indicatorId": "da87e67d-5ac4-4cc0-9e75-6037b14883ca",
								"indicatorStand": "优选师资、配备适当",
								"indicatorName": "培训实施",
								"indicatorObject": 2
							},
							{
								"uuid": "d930f1d7-a6a2-4079-b6cf-640c53414847",
								"createTime": "2017-06-21 08:49:15",
								"createUser": "学校管理员",
								"updateTime": "2017-06-21 08:49:15",
								"updateUser": null,
								"version": 0,
								"extField01": null,
								"extField02": null,
								"extField03": null,
								"extField04": null,
								"extField05": null,
								"isDelete": 0,
								"orderIndex": null,
								"indicatorId": "da87e67d-5ac4-4cc0-9e75-6037b14883ca",
								"indicatorStand": "教学流程控制严谨有序、张弛有度，讲究实效",
								"indicatorName": "培训实施",
								"indicatorObject": 2
							},
							{
								"uuid": "f1c60490-b280-4291-9d64-78ed36c03148",
								"createTime": "2017-06-21 08:49:15",
								"createUser": "学校管理员",
								"updateTime": "2017-06-21 08:49:15",
								"updateUser": null,
								"version": 0,
								"extField01": null,
								"extField02": null,
								"extField03": null,
								"extField04": null,
								"extField05": null,
								"isDelete": 0,
								"orderIndex": null,
								"indicatorId": "da87e67d-5ac4-4cc0-9e75-6037b14883ca",
								"indicatorStand": "课程设置、内容安排科学合理",
								"indicatorName": "培训实施",
								"indicatorObject": 2
							},
							{
								"uuid": "08400dc9-00b0-4dd8-94bf-650ff1b75f48",
								"createTime": "2017-06-21 08:50:14",
								"createUser": "学校管理员",
								"updateTime": "2017-06-21 08:50:14",
								"updateUser": null,
								"version": 0,
								"extField01": null,
								"extField02": null,
								"extField03": null,
								"extField04": null,
								"extField05": null,
								"isDelete": 0,
								"orderIndex": null,
								"indicatorId": "f848cc11-764b-4103-aa29-169b0a6c8007",
								"indicatorStand": "服务管理严格规范，后勤保障到位",
								"indicatorName": "培训保障",
								"indicatorObject": 2
							},
							{
								"uuid": "93e64d29-85d6-44c8-bb4a-0b625e47a94e",
								"createTime": "2017-06-21 08:50:14",
								"createUser": "学校管理员",
								"updateTime": "2017-06-21 08:50:14",
								"updateUser": null,
								"version": 0,
								"extField01": null,
								"extField02": null,
								"extField03": null,
								"extField04": null,
								"extField05": null,
								"isDelete": 0,
								"orderIndex": null,
								"indicatorId": "f848cc11-764b-4103-aa29-169b0a6c8007",
								"indicatorStand": "教学设施、培训资源满足需要，食宿卫生安全",
								"indicatorName": "培训保障",
								"indicatorObject": 2
							}
						]
					}

					if(datas.success) {
						var classInfo = datas.evalClass;
						var evalStands = datas.evalStand;

						$(".beginDate").html(classInfo.beginDate);
						$(".endDate").html(classInfo.endDate);
						$(".trainDays").html(classInfo.trainDays);
						$(".bzr").html(classInfo.bzr);
						$(".mobile").html(classInfo.mobile);

						var html = "";
						var indicatorId="";
						for(i = 0; i < evalStands.length; i++) {
							var es = evalStands[i];
							
							if(es.indicatorId!=indicatorId){
								html += '<ul class="s1">'+
								'<li class="s2">' + es.indicatorName + '</li>' +
								'</ul>';
							}
							
							html +='<div>' +
							'<li class="s3">'+(i+1)+". " + es.indicatorStand + '</li>' +
							'<ul class="radioUl">' +
							'<li class="radioLi">' + '<a class="radioA radio' + i + ' selected" data-val="verySatisfactioncount">很满意</a></li>' +
							'<li class="radioLi">' + '<a class="radioA radio' + i + '"data-val="satisfactioncount">满意</a></li>' +
							'<li class="radioLi">' + '<a class="radioA radio' + i + '"data-val="basSatisfactioncount">基本满意</a></li>' +
							'<li class="radioLi">' + '<a class="radioA radio' + i + '"data-val="noSatisfactioncount">不满意</a></li>' +
							'<div style="clear: both;"></div>' +
							'</ul>' +
							'</div>';
							
							indicatorId=es.indicatorId;
						}
						html += '<ul class="yj">' +
							'<li class="y1">意见建议：</li>' +
							'</ul>';
						html += '<textarea class="shuru" name="" placeholder="请输入您的意见建议..."></textarea>' +
							'<input type="button" id="submit" value="提交" />';
						$("#evalStandForm").append(html);
					}
					$("a.radioA").click(function() {
						var ul = $(this).parent("li.radioLi").parent("ul.radioUl")[0];
						$(ul).find("a.radioA").removeClass("selected");
						$(this).addClass("selected");
					})

					$("#submit").click(function() {
						
						var classInfo = datas.evalClass;
						var evalStadns = datas.evalStand;
						var storage = window.localStorage;
						var uuid = classInfo.classId;

						if(!storage.getItem(uuid) || storage.getItem(uuid) != 1) {
							var paramter = [];
							             
							for(var i = 0; i < evalStands.length; i++) {
								var obj = {};
								var es = evalStadns[i];

								obj.uuid = classInfo.classId;
								obj.beginDate = classInfo.beginDate;
								obj.endDate = classInfo.endDate;
								obj.trainDays = classInfo.trainDays;
								obj.bzr = classInfo.bzr;
								obj.mobile = classInfo.mobile;
								obj.indicatorStand = es.indicatorStand;
								obj.indicatorName = es.indicatorName;
								obj.indicatorId = es.indicatorId;
								obj.verySatisfactioncount = 0;
								obj.satisfactioncount = 0;
								obj.basSatisfactioncount = 0;
								obj.noSatisfactioncount = 0;

								var value = $($(".radio0.selected")).attr("data-val");
								obj[value] = 1;

								obj.advise = $(".shuru").val();
								paramter.push(obj);
							}
							console.log(paramter);
							console.log(JSON.stringify(paramter));

							storage.setItem(uuid, 1);
							alert("评价成功");

							//        $.ajax({
							//        	type:"post",
							//        	url:"",
							//        	async:"",
							//        	data:{eval:JSON.stringify(paramter)}
							//        	success:function(data){
							//        		console.log(data);
							//        		if(data.success==true){
							//        			storage.setItem(uuid,1);
							//        			alert("评价成功");
							//        		}else{
							//        			alert("评价失败");
							//        		},
							//        		error:function(){
							//					alert("请求失败，请稍后重试！");			
							//        		
							//        		}
							//        	}
							//        })

						}else{
							alert("不能重复评价");
						}
					});
			})
	</script>

</html>